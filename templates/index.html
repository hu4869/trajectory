<!DOCTYPE html>
<html lang="en">
{% load leaflet_tags %}
{% load static %}
<head>
    <meta charset="UTF-8">
    <title></title>
    {% leaflet_css plugins="ALL" %}
    {% leaflet_js plugins="ALL" %}
    {% csrf_token %}
    <script type='text/javascript' src='//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js'></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap/3/css/bootstrap.css" />
    <script type="text/javascript" src="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js"></script>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css" />

    <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'porto.css' %}">
    <script src="{% static "initial_map.js" %}"></script>
    <script src="{% static "viewLayer.js" %}"></script>
    <script src="{% static "sidebar.js" %}"></script>
    <script src="{% static "timeline.js" %}"></script>
    <script src="{% static "barchart.js" %}"></script>
</head>
<body>

{#{% leaflet_map "map" %}#}
<div id="map"></div>
<div id="timeline"></div>
<div id="timelinebar">
    .   .Current range: <label id="timelinevalue"></label>.   .<button>submit</button>
</div>

<div id="chart"></div>
{#<script async defer#}
{#    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBbc7DsCbHfoXRAdtnXMWwa6IhxCHXP4N4&callback=initialize">#}
{#</script>#}

<div id="control" style="position: absolute;
    left: 50px;
    top: 12px;
    z-index: 1000;">
    <input name="daterange" type="text" >
{#    <select>#}
{#        <option>long trips first</option>#}
{#        <option>short trips first</option>#}
{#    </select>#}
    <span id="query_state">
        <label id="state"></label><label id="all"></label>
        <button>Pause</button>
    </span>
</div>

<script>
    var map = L.map('map',{
        preferCanvas: true,
        center:[41.155376, -8.613999],
        zoom: 15
    });
    L.tileLayer('https://api.tiles.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoicGxhbmVtYWQiLCJhIjoiemdYSVVLRSJ9.g3lbg_eN0kztmsfIPxa9MQ', {
        attribution: '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    var mv = new map_widget(map);
    mv.init();
</script>

</body>
</html>